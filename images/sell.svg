<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="411px" preserveAspectRatio="none" style="width:350px;height:411px;background:#FFFFFF;" version="1.1" viewBox="0 0 350 411" width="350px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ivl4ypislfyx" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="77" x="134.25" y="28.708">Sell USN</text><rect fill="#FFFFFF" filter="url(#f1ivl4ypislfyx)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="288.5" y="165.7813"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="29" x2="29" y1="75.25" y2="368.4453"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="157.5" x2="157.5" y1="75.25" y2="368.4453"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="293.5" x2="293.5" y1="75.25" y2="368.4453"/><rect fill="#FEFECE" filter="url(#f1ivl4ypislfyx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="45" x="5" y="39.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="12" y="59.9482">alice</text><rect fill="#FEFECE" filter="url(#f1ivl4ypislfyx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="45" x="5" y="367.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="12" y="387.4404">alice</text><rect fill="#FEFECE" filter="url(#f1ivl4ypislfyx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="40" x="135.5" y="39.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="142.5" y="59.9482">usn</text><rect fill="#FEFECE" filter="url(#f1ivl4ypislfyx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="40" x="135.5" y="367.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="142.5" y="387.4404">usn</text><rect fill="#FEFECE" filter="url(#f1ivl4ypislfyx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="90" x="246.5" y="39.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="253.5" y="59.9482">priceoracle</text><rect fill="#FEFECE" filter="url(#f1ivl4ypislfyx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="90" x="246.5" y="367.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="253.5" y="387.4404">priceoracle</text><rect fill="#FFFFFF" filter="url(#f1ivl4ypislfyx)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="288.5" y="165.7813"/><polygon fill="#A80036" points="145.5,132.6484,155.5,136.6484,145.5,140.6484,149.5,136.6484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="29.5" x2="151.5" y1="136.6484" y2="136.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="36.5" y="101.3169">USN amount</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="36.5" y="116.4497">+ expected rate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="36.5" y="131.5825">+ slippage</text><polygon fill="#A80036" points="276.5,161.7813,286.5,165.7813,276.5,169.7813,280.5,165.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="157.5" x2="282.5" y1="165.7813" y2="165.7813"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="112" x="164.5" y="160.7153">get_price_data</text><polygon fill="#A80036" points="168.5,190.9141,158.5,194.9141,168.5,198.9141,164.5,194.9141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="162.5" x2="292.5" y1="194.9141" y2="194.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="174.5" y="189.8481">NEAR/USDT rate</text><line style="stroke:#A80036;stroke-width:1.0;" x1="157.5" x2="199.5" y1="224.0469" y2="224.0469"/><line style="stroke:#A80036;stroke-width:1.0;" x1="199.5" x2="199.5" y1="224.0469" y2="237.0469"/><line style="stroke:#A80036;stroke-width:1.0;" x1="158.5" x2="199.5" y1="237.0469" y2="237.0469"/><polygon fill="#A80036" points="168.5,233.0469,158.5,237.0469,168.5,241.0469,164.5,237.0469" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="164.5" y="218.981">verify timestamp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="157.5" x2="199.5" y1="266.1797" y2="266.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="199.5" x2="199.5" y1="266.1797" y2="279.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="158.5" x2="199.5" y1="279.1797" y2="279.1797"/><polygon fill="#A80036" points="168.5,275.1797,158.5,279.1797,168.5,283.1797,164.5,279.1797" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="164.5" y="261.1138">assert slippage</text><line style="stroke:#A80036;stroke-width:1.0;" x1="157.5" x2="199.5" y1="308.3125" y2="308.3125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="199.5" x2="199.5" y1="308.3125" y2="321.3125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="158.5" x2="199.5" y1="321.3125" y2="321.3125"/><polygon fill="#A80036" points="168.5,317.3125,158.5,321.3125,168.5,325.3125,164.5,321.3125" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="164.5" y="303.2466">burn USN</text><polygon fill="#A80036" points="40.5,346.4453,30.5,350.4453,40.5,354.4453,36.5,350.4453" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="34.5" x2="156.5" y1="350.4453" y2="350.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="46.5" y="345.3794">send NEAR</text><!--MD5=[297cc2c321341b3272606ce20b23e7b4]
@startuml

title Sell USN

alice -> usn: USN amount\n+ expected rate\n+ slippage

usn -> priceoracle: ""get_price_data""
activate priceoracle
usn <- priceoracle: NEAR/USDT rate
deactivate priceoracle
usn -> usn: verify timestamp

usn -> usn: assert slippage
usn -> usn: burn USN
alice <- - usn: send NEAR
@enduml

PlantUML version 1.2022.0(Tue Jan 11 18:16:42 EET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>